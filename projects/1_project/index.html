<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Demosaicing in C++ | Kao Kitichotkul </title> <meta name="author" content="Kao Kitichotkul"> <meta name="description" content="See &lt;a href=" https:> </head> <body> <p>GitHub repository"&gt; <meta name="keywords" content="computational-imaging, inverse-problem, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://rkitichotkul.github.io/projects/1_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </p> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kao</span> Kitichotkul </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/cv.pdf">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Demosaicing in C++</h1> <p class="post-description">See <a href="https://github.com/rkitichotkul/demosaic" rel="external nofollow noopener" target="_blank">GitHub repository</a></p> </header> <article> <p>Digital cameras capture images using sensors overlaid with a color filter array, most commonly the Bayer pattern. Each pixel records only one color channel — red, green, or blue — requiring a process called <em>demosaicing</em> to reconstruct a full-color image. As part of a recent project, I developed a C++ engine to simulate the Bayer pattern and perform demosaicing via OpenCV’s <a href="https://docs.opencv.org/3.4/de/d25/imgproc_color_conversions.html" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">cvtColor</code></a> function.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_rggb-480.webp 480w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_rggb-800.webp 800w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_rggb-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_rggb.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Simulated RAW image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_sim_demosaiced-480.webp 480w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_sim_demosaiced-800.webp 800w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_sim_demosaiced-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_sim_demosaiced.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Demosaiced image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/rkitichotkul/demosaic/blob/main/assets/mosaic-480.webp 480w,https://github.com/rkitichotkul/demosaic/blob/main/assets/mosaic-800.webp 800w,https://github.com/rkitichotkul/demosaic/blob/main/assets/mosaic-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://github.com/rkitichotkul/demosaic/blob/main/assets/mosaic.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Zoomed-in Bayer pattern" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Demosaicing demonstration using a photo of my desk. (Left) Simulated RAW image from RGGB Bayer pattern. (Middle) Demosaiced image. (Right) Zoomed-in RAW image with overlaid Bayer pattern. </div> <p>I used <a href="https://www.libraw.org/" rel="external nofollow noopener" target="_blank">LibRaw</a> to read real RAW images, enabling the engine to process actual sensor data. Demosaicing alone, however, is not sufficient to produce accurate color for real RAW images. Additional steps like black level correction, white balancing, and gamma adjustment are likely necessary.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_realraw_grayscale-480.webp 480w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_realraw_grayscale-800.webp 800w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_realraw_grayscale-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_realraw_grayscale.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Real RAW image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_real_demosaiced-480.webp 480w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_real_demosaiced-800.webp 800w,https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_real_demosaiced-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://github.com/rkitichotkul/demosaic/blob/main/assets/plush_real_demosaiced.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Demosaiced image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Demosaicing a real RAW image. My Fujifilm X-A3 allows saving both .jpg and RAW (as .RAF) simultaneously. (Left) Real RAW image. (Right) Demosaiced image. </div> <p>There could be future updates with other parts of the Image Signal Processing pipeline.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Kao Kitichotkul. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>